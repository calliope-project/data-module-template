# Data module template

A template for modular data workflows using [snakemake](https://snakemake.readthedocs.io/en/stable/), part of the [clio](https://clio.readthedocs.io/) toolset.

## How to use this template

1. Install [`copier`](https://copier.readthedocs.io/en/stable/) with your favourite package management system (we recommend [pixi](https://pixi.sh/)).
2. Use `copier` to copy this repo.

    ```bash
    pixi add copier
    pixi run copier copy https://github.com/calliope-project/data-module-template.git ./path/to/destination
    ```

3. Answer some questions so can we pre-fill licensing, citiation files, etc...
4. You're all set up!

## Features

- Standardised layout compliant with the [snakemake workflow catalogue's](https://snakemake.github.io/snakemake-workflow-catalog/#) listing requirements.
    - `resources/`: files external to the module.
        - `user/`: files that should be provided by users. Document them well!
        - `automatic/`: files that the module downloads before processing.
    - `results/`: files generated by the module's algorithms (both intermediate and final).
- Pre-made integration test setup for your module.
    - Continuous Integration (CI) settings, ready for [pre-commit.ci](https://pre-commit.ci/).
    - Premade `pytest` setup.
- Auto-generated documentation, ready for [Read the Docs](https://about.readthedocs.com/).

## IMPORTANT

A few things to be aware of.

- **Modules do not work like regular snakemake workflows**
    - The primary way to test them should be external (calling `module:`, passing resources, and requesting results). Check the pre-made example in `tests/integration` for more info.
    - Internal access (calling the `all:` rule) will not work, as the module will not have the necessary `resources/` to execute properly.
- **Please respect the 'specification' section of the documentation**
    - `docs/hooks/clio_standard.py` will auto-generate documentation for you as long as certain files (e.g., `INTERFACE.yaml`, `CITATION.yaml`) are filled correctly.
    - Please **do not modify this file** to ensure all data modules have a similar 'specification' section.
    - If you wish to extend the documentation, feel free to add other sections.
